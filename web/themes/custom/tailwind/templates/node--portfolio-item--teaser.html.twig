{#
/**
 * @file
 * Theme override to display a portfolio item node in teaser view mode.
 *
 * Available variables:
 * - node: The node entity with limited access to object properties and methods.
 * - label: The title of the node.
 * - content: All node items. Use {{ content }} to print them all,
 *   or print a subset such as {{ content.field_example }}. Use
 *   {{ content|without('field_example') }} to temporarily suppress the printing
 *   of a given child element.
 * - url: Direct URL of the current node.
 * - view_mode: View mode; for example, "teaser" or "full".
 *
 * @see template_preprocess_node()
 */
#}
{%
  set classes = [
    'group',
    'block',
    'h-full',
    'flex',
    'flex-col',
    'overflow-hidden',
    'rounded-2xl',
    'bg-primary-900',
    'border',
    'border-white/10',
    'hover:border-accent-main/50',
    'transition-all',
  ]
%}

{# Get link URL - use field_link if available, otherwise use node URL #}
{% set link_url = url %}
{% if node.field_link.value %}
  {% set link_url = node.field_link.value %}
{% endif %}

<a href="{{ link_url }}"{{ attributes.addClass(classes) }}>
  {# Image #}
  {% if node.field_image.entity %}
    <div class="h-64 overflow-hidden portfolio-image">
      {{ content.field_image|render|striptags('<img>')|raw }}
    </div>
  {% endif %}

  {# Content #}
  <div class="p-6 flex-1 flex flex-col">
    {# Title #}
    {% if label %}
      <h3 class="text-xl font-bold text-white mb-2 group-hover:text-accent-main transition-colors">
        {{ label }}
      </h3>
    {% endif %}

    {# Technologies - render raw value to avoid field wrapper #}
    {% if node.field_technologies.value %}
      <p class="text-slate-400 text-sm mb-4">
        {{ node.field_technologies.value }}
      </p>
    {% endif %}

    {# Description - render raw value to avoid field wrapper #}
    {% if node.field_description.value %}
      <p class="text-slate-500 text-sm leading-relaxed line-clamp-3">
        {{ node.field_description.value }}
      </p>
    {% endif %}
  </div>
</a>
