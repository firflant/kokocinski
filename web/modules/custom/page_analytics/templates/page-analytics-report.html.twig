{#
  @file
  Template for the page analytics report.
#}
<div class="page-analytics-report">
  {% if sampling_rate > 1 and sampling_note %}
    <p class="page-analytics-sampling-note">{{ sampling_note }}</p>
  {% endif %}

  <p class="page-analytics-period">
    {{ 'Showing top pages from the last:'|t }}
    {% if period == 7 %}
      <strong>{{ '7 days'|t }}</strong>
      | <a href="{{ period_30_url }}">{{ '30 days'|t }}</a>
    {% else %}
      <a href="{{ period_7_url }}">{{ '7 days'|t }}</a>
      | <strong>{{ '30 days'|t }}</strong>
    {% endif %}
  </p>

  {% if rows is empty %}
    <p>{{ 'No page analytics data yet. Visit some non-admin pages and run cron to collect data.'|t }}</p>
  {% else %}
    <table class="page-analytics-table sticky-enabled">
      <thead>
        <tr>
          <th>{{ 'Path'|t }}</th>
          <th>{{ 'Views (period)'|t }}</th>
          <th>{{ 'Chart'|t }}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            <td>
              <a href="{{ row.path|e('html_attr') }}"><code>{{ row.path|e('html') }}</code></a>
            </td>
            <td>{{ row.total|number_format }}</td>
            <td>
              <div class="page-analytics-chart-wrap" style="width: 280px; height: 80px;">
                <canvas
                  class="page-analytics-chart"
                  id="page-analytics-chart-{{ row.chart_index }}"
                  data-labels="{{ row.chart_labels|json_encode|e('html_attr') }}"
                  data-values="{{ row.chart_values|json_encode|e('html_attr') }}"
                  width="280"
                  height="80"
                  role="img"
                  aria-label="{{ 'Views per day for'|t }} {{ row.path }}"
                ></canvas>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</div>
