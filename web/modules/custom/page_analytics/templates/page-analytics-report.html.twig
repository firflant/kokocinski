{#
  @file
  Template for the page analytics report.
#}
<div class="page-analytics-report">
  {% if rows is empty %}
    <p>
      {{ 'No page analytics data is available yet. Visit pages that do not match your <a href="@settings_url">current exclusion criteria</a> (often anonymously), then run cron.'|t({'@settings_url': path('page_analytics.settings')}) }}
    </p>
  {% else %}
    <table class="page-analytics-table sticky-enabled">
      <thead>
        <tr>
          <th>{{ 'Page'|t }}</th>
          <th>{{ 'Views'|t }}</th>
          <th>{{ 'Chart'|t }}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            <td>
              <a href="{{ row.path|e('html_attr') }}"><code>{{ row.path|e('html') }}</code></a>
            </td>
            <td>{{ row.total|number_format }}</td>
            <td>
              <div class="page-analytics-chart-wrap" style="width: 320px; height: 80px;">
                <canvas
                  class="page-analytics-chart"
                  id="page-analytics-chart-{{ row.chart_index }}"
                  data-labels="{{ row.chart_labels|json_encode|e('html_attr') }}"
                  data-values="{{ row.chart_values|json_encode|e('html_attr') }}"
                  width="320"
                  height="80"
                  role="img"
                  aria-label="{{ 'Views per day for'|t }} {{ row.path }}"
                ></canvas>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</div>
